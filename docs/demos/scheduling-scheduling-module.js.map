{"version":3,"sources":["./src/app/features/fundamentals/scheduling/scheduling/scheduling.component.ts","./src/app/features/fundamentals/scheduling/scheduling.module.ts","./src/app/shared/debug-helper/visualizer/index.ts","./src/app/features/fundamentals/scheduling/scheduling.routes.ts"],"names":[],"mappings":"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","file":"scheduling-scheduling-module.js","sourcesContent":["import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnInit } from '@angular/core';\n\nimport { Observable, of, Subject } from 'rxjs';\nimport { scan, tap } from 'rxjs/operators';\nimport { getStrategies, priorityTickMap, SchedulingPriority } from '@rx-angular/template';\n\n@Component({\n  selector: 'rxa-scheduling',\n  template: `\n    <rxa-visualizer>\n      <div visualizerHeader>\n        <h2>Scheduling Options</h2>\n        <button mat-raised-button [unpatch] (click)=\"scheduleAllPrios()\">\n          scheduleAll\n        </button>\n        <button mat-raised-button [unpatch] (click)=\"scheduleByPrio()\">\n          Unscheduled\n        </button>\n        <button mat-raised-button [unpatch] (click)=\"scheduleByPrio(prios.Promise)\">\n          Promise\n        </button>\n        <button mat-raised-button [unpatch] (click)=\"scheduleByPrio(prios.setTimeout)\">\n          setTimeout\n        </button>\n        <button mat-raised-button [unpatch] (click)=\"scheduleByPrio(prios.setInterval)\">\n          setInterval\n        </button>\n        <button mat-raised-button [unpatch] (click)=\"scheduleByPrio(prios.animationFrame)\">\n          animationFrame\n        </button>\n        <button mat-raised-button [unpatch] (click)=\"scheduleByPrio(prios.idleCallback)\">\n          idleCallback\n        </button>\n        <button mat-raised-button [unpatch] (click)=\"scheduleByPrio(prios.background)\">\n          background\n        </button>\n        <button mat-raised-button [unpatch] (click)=\"scheduleByPrio(prios.userVisible)\">\n          userVisible\n        </button>\n        <button mat-raised-button [unpatch] (click)=\"scheduleByPrio(prios.userBlocking)\">\n          userBlocking\n        </button>\n      </div>\n    </rxa-visualizer>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  styles: [\n      `\n      button:active {\n        background: red;\n      }\n    `\n  ]\n})\nexport class SchedulingComponent implements OnInit {\n  prios = SchedulingPriority;\n\n  o$ = of(0);\n\n  strategies;\n  nextValues = new Subject<any>();\n  value$: Observable<string> = this.nextValues.pipe(\n    scan(count => ++count),\n    tap(v => console.log('count:', v))\n  );\n  value;\n\n  constructor(private cdRef: ChangeDetectorRef) {\n  }\n\n  scheduleAllPrios() {\n    const sync = () => {\n      this.cdRef.detectChanges();\n    };\n    const micro = () => {\n      this.cdRef.detectChanges();\n    };\n    const setInterval = () => {\n      this.cdRef.detectChanges();\n    };\n    const setTimeout = () => {\n      this.cdRef.detectChanges();\n    };\n    const animationFrame = () => {\n      this.cdRef.detectChanges();\n    };\n    const idleCallback = () => {\n      this.cdRef.detectChanges();\n    };\n    const userBlocking = () => {\n      this.cdRef.detectChanges();\n    };\n    const userVisible = () => {\n      this.cdRef.detectChanges();\n    };\n    const background = () => {\n      this.cdRef.detectChanges();\n    };\n\n    sync();\n    priorityTickMap[SchedulingPriority.Promise].subscribe(micro);\n    priorityTickMap[SchedulingPriority.setTimeout].subscribe(setTimeout);\n    priorityTickMap[SchedulingPriority.setInterval].subscribe(setInterval);\n    priorityTickMap[SchedulingPriority.animationFrame].subscribe(animationFrame);\n    priorityTickMap[SchedulingPriority.idleCallback].subscribe(idleCallback);\n    priorityTickMap[SchedulingPriority.background].subscribe(background);\n    priorityTickMap[SchedulingPriority.userVisible].subscribe(userVisible);\n    priorityTickMap[SchedulingPriority.userBlocking].subscribe(userBlocking);\n  }\n\n  scheduleByPrio(priority?: SchedulingPriority) {\n    const XXXXXXXXXXXXXXXXXXXXX = () => {\n      this.cdRef.detectChanges();\n      console.log('scheduled over', priority);\n    };\n\n    priority\n      ? priorityTickMap[priority].subscribe(XXXXXXXXXXXXXXXXXXXXX)\n      : XXXXXXXXXXXXXXXXXXXXX();\n  }\n\n  ngOnInit() {\n    this.strategies = getStrategies({ cdRef: this.cdRef });\n    console.log(this.strategies, this.cdRef);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RouterModule } from '@angular/router';\nimport { SchedulingComponent } from './scheduling/scheduling.component';\nimport { TemplateModule } from '@rx-angular/template';\nimport { ROUTES } from './scheduling.routes';\nimport { MatButtonModule } from '@angular/material/button';\nimport { VisualizerModule } from '../../../shared/debug-helper/visualizer';\n\nconst DECLARATIONS = [SchedulingComponent];\n\n@NgModule({\n  declarations: [DECLARATIONS],\n  imports: [\n    CommonModule,\n    RouterModule.forChild(ROUTES),\n    TemplateModule,\n    MatButtonModule,\n    VisualizerModule\n  ],\n  exports: [DECLARATIONS]\n})\nexport class SchedulingModule {}\n","export {VisualizerModule} from './visualizer.module';\nexport {VisualizerComponent} from './visualizer/visualizer.component';\n","import { SchedulingComponent } from './scheduling/scheduling.component';\n\nexport const ROUTES = [\n  {\n    path: '',\n    component: SchedulingComponent\n  }\n];\n"],"sourceRoot":"webpack:///"}